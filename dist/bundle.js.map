{"version":3,"file":"bundle.js","sources":["../node_modules/auto-curry/index.js","../src/index.js"],"sourcesContent":["module.exports = function cu(fn) {\n  'use strict'\n\n  var args = [].slice.call(arguments)\n  var typeOfFn = typeof fn\n\n  if ('function' !== typeOfFn) throw new Error('auto-curry: Invalid parameter. Expected function, received ' + typeOfFn)\n  if (fn.length <= 1) return fn\n  if (args.length - 1 >= fn.length) return fn.apply(this, args.slice(1))\n\n  return function() {\n    return cu.apply(this, args.concat([].slice.call(arguments)))\n  };\n};\n","import cu from 'auto-curry'\n\nexport const observeElementInViewport = cu(\n  (opts, el, inHandler, outHandler) => {\n    const defaultOptions = {\n      // null for window, otherwise give css selector.\n      // el to be observed should be a child of element given by this selector\n      viewport: null,\n\n      // accepts px and %\n      modTop: '0px',\n      modRight: '0px',\n      modBottom: '0px',\n      modLeft: '0px',\n\n      // percentage of el that should intersect with viewport to consinder it \"in viewport\"\n      // 0 means on the 1st pixel intersection or exit, the respective handler will be called\n      threshold: [0]\n    }\n\n    const {\n      viewport,\n      modTop,\n      modLeft,\n      modBottom,\n      modRight,\n      threshold\n    } = Object.assign({}, defaultOptions, opts)\n\n    if (!Array.isArray(threshold) && !(typeof threshold === 'number')) {\n      throw new Error('threshold should be a number or an array of numbers')\n    }\n\n    const intersectionObserverOptions = {\n      root: viewport instanceof Node ? viewport : null,\n      rootMargin: `${modTop} ${modRight} ${modBottom} ${modLeft}`,\n      // threshold is always an array with 0 as the first element\n      // so that isIntersecting is caught at lease once as it\n      // is reported by the entry only for threshold 0\n      // ¯\\_(ツ)_/¯\n      // The mod 101 is to prevent threshold from being greater than 1\n      threshold: defaultOptions.threshold.concat(\n        Array.isArray(threshold)\n          ? threshold.map(t => Math.floor(t % 101) / 100)\n          : [Math.floor(threshold % 101) / 100]\n      )\n    }\n\n    const isDebugEnabled =\n          localStorage.debug &&\n          localStorage.debug.includes('observeElementInViewport')\n\n    if (isDebugEnabled) {\n      console.log('IntersectionObserver options', intersectionObserverOptions)\n    }\n\n    const cb = (entries, observer) => {\n      const entryForEl = entries.filter(entry => entry.target === el)[0]\n      const unobserve = _ => observer.unobserve(el)\n\n      if (entryForEl) {\n        const { isIntersecting } = entryForEl\n\n        if (isIntersecting) {\n          inHandler(entryForEl, unobserve)\n        } else {\n          outHandler(entryForEl, unobserve)\n        }\n      }\n    }\n\n    const observer = new IntersectionObserver(cb, intersectionObserverOptions)\n\n    observer.observe(el)\n\n    return _ => observer.unobserve(el)\n  }\n)\n\nexport const isInViewport = cu(async (opts, el) => {\n  return new Promise((resolve, reject) => {\n    try {\n      observeElementInViewport(\n        opts,\n        el,\n        (_, unobserve) => {\n          unobserve()\n          resolve(true)\n        },\n        (_, unobserve) => {\n          unobserve()\n          resolve(false)\n        }\n      )\n    } catch (e) {\n      reject(e)\n    }\n  })\n})\n"],"names":["cu"],"mappings":"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"}